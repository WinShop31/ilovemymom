<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"/><title>Filsik AI Chat</title><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><style>*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#020617;color:#e5e7eb;min-height:100vh;padding:env(safe-area-inset-top,0) env(safe-area-inset-right,0) env(safe-area-inset-bottom,0) env(safe-area-inset-left,0)}.root{display:flex;justify-content:center;align-items:stretch;min-height:100vh}.app{width:100%;max-width:1100px;background:#020617;border-radius:16px;border:1px solid #1e293b;display:flex;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,.5)}.sidebar{width:260px;background:#020617;border-right:1px solid #1f2933;display:flex;flex-direction:column}.sidebar-header{padding:12px 14px;border-bottom:1px solid #1f2933;display:flex;align-items:center;justify-content:space-between;gap:8px}.sidebar-title{font-size:14px;font-weight:600}.sidebar-subtitle{font-size:11px;color:#9ca3af}.sidebar-title-block{display:flex;flex-direction:column}.sidebar-btn{background:#111827;color:#e5e7eb;border-radius:999px;border:1px solid #374151;padding:6px 10px;font-size:11px;cursor:pointer}.sidebar-btn:hover{background:#1f2937}.chat-list{flex:1;overflow-y:auto;padding:6px 6px 10px}.chat-list-item{display:flex;align-items:center;padding:8px 8px;border-radius:10px;cursor:pointer;margin-bottom:4px;gap:8px;transition:background .15s ease,transform .1s ease}.chat-list-item.active{background:#111827;border:1px solid #4f46e5}.chat-list-item:hover{background:#0b1120}.chat-list-main{flex:1;min-width:0}.chat-list-title{font-size:13px;font-weight:500;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.chat-list-sub{font-size:11px;color:#6b7280;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.chat-list-meta{font-size:10px;color:#6b7280}.chat-list-delete{font-size:14px;color:#6b7280;cursor:pointer;padding:2px 4px}.chat-list-delete:hover{color:#ef4444}.sidebar-footer{padding:8px 10px;border-top:1px solid #1f2933;font-size:10px;color:#6b7280;display:flex;justify-content:space-between;align-items:center}.sidebar-link{color:#9ca3af;text-decoration:none}.sidebar-link:hover{text-decoration:underline}.main{flex:1;display:flex;flex-direction:column;background:#020617}.header{padding:10px 14px;border-bottom:1px solid #1f2933;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(to right,#020617,#0b1120);gap:12px}.title-block{display:flex;flex-direction:column;gap:2px}.title{font-size:17px;font-weight:600}.subtitle{font-size:11px;color:#9ca3af}.controls{display:flex;gap:8px;align-items:center}.select{background:#020617;color:#e5e7eb;border-radius:999px;border:1px solid #374151;padding:6px 10px;font-size:12px;outline:none;max-width:200px}.btn{background:#4f46e5;color:#fff;border:none;border-radius:999px;font-size:12px;padding:6px 12px;cursor:pointer;transition:background .15s ease,transform .1s ease;white-space:nowrap}.btn:hover{background:#6366f1;transform:translateY(-1px)}.btn-secondary{background:transparent;border:1px solid #4b5563}.btn-secondary:hover{background:#111827}.btn-icon{display:none;background:transparent;border:1px solid #374151;border-radius:999px;width:30px;height:30px;align-items:center;justify-content:center;font-size:16px}.chat-wrapper{position:relative;flex:1;min-height:0;display:flex;flex-direction:column}.chat{flex:1;overflow-y:auto;padding:12px 12px 4px;display:flex;flex-direction:column;gap:8px;scroll-behavior:smooth}.message-row{display:flex;margin-bottom:4px}.message-row.user{justify-content:flex-end}.message-row.assistant{justify-content:flex-start}.message{max-width:80%;padding:8px 10px;border-radius:12px;font-size:14px;line-height:1.4;word-wrap:break-word;white-space:pre-wrap}.message.user{background:#4f46e5;color:#fff;border-bottom-right-radius:2px}.message.assistant{background:#020617;border:1px solid #1f2937;color:#e5e7eb;border-bottom-left-radius:2px}.message.system{align-self:center;background:transparent;border:none;color:#6b7280;font-size:11px}.timestamp{font-size:10px;color:#6b7280;margin-top:2px}.status-bar{padding:4px 12px 6px;font-size:11px;color:#6b7280;display:flex;justify-content:space-between;align-items:center;gap:8px;background:#020617}.status-dot{width:8px;height:8px;border-radius:999px;background:#22c55e;display:inline-block;margin-right:4px}.small-link{font-size:11px;color:#9ca3af;text-decoration:none}.small-link:hover{text-decoration:underline}.input-area{border-top:1px solid #1f2937;padding:8px 10px;display:flex;gap:8px;background:#020617;align-items:flex-end}.input{flex:1;resize:none;border-radius:16px;border:1px solid #374151;background:#020617;color:#e5e7eb;padding:8px 10px;font-size:14px;min-height:40px;max-height:120px;outline:none}.input::placeholder{color:#6b7280}@media (max-width:900px){.app{border-radius:0;max-width:100%;min-height:100vh}}@media (max-width:768px){.sidebar{position:fixed;top:0;bottom:0;left:0;width:260px;z-index:20;transform:translateX(-100%);transition:transform .2s ease-out;box-shadow:8px 0 20px rgba(0,0,0,.7)}.sidebar.open{transform:translateX(0)}.sidebar-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:10;opacity:0;pointer-events:none;transition:opacity .2s ease-out}.sidebar-backdrop.visible{opacity:1;pointer-events:auto}.btn-icon{display:inline-flex}.header{padding:10px 12px}.title{font-size:16px}.subtitle{font-size:11px}.controls{gap:6px}.select{max-width:150px;font-size:11px}.btn-secondary{padding:6px 10px;font-size:11px}.chat{padding:10px 8px 4px}.message{max-width:88%}.input-area{padding:8px 8px;padding-bottom:calc(8px + env(safe-area-inset-bottom,0))}.btn{padding:8px 10px;font-size:13px}}@media (max-width:480px){.message{max-width:92%}.status-bar{padding-left:8px;padding-right:8px}}</style></head><body><div class="root"><div class="app"><div class="sidebar" id="s0"><div class="sidebar-header"><div class="sidebar-title-block"><div class="sidebar-title">–ß–∞—Ç—ã</div><div class="sidebar-subtitle" id="sc0"></div></div><button id="n0" class="sidebar-btn">Ôºã –ù–æ–≤—ã–π —á–∞—Ç</button></div><div class="chat-list" id="cl0"></div><div class="sidebar-footer"><div>Filsik AI Chat</div><a href="https://github.com/USERNAME/REPO" target="_blank" class="sidebar-link">GitHub</a></div></div><div class="sidebar-backdrop" id="sb0"></div><div class="main"><div class="header"><div class="controls"><button class="btn-icon" id="st0">‚ò∞</button><div class="title-block"><div class="title" id="ct0">–ù–æ–≤—ã–π —á–∞—Ç</div><div class="subtitle" id="cs0">–í—ã–±–µ—Ä–∏ –º–æ–¥–µ–ª—å –∏ –Ω–∞—á–Ω–∏ –¥–∏–∞–ª–æ–≥</div></div></div><div class="controls"><select id="m0" class="select" title="–ú–æ–¥–µ–ª—å"><option value="alice">üîµ Alice ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è</option><option value="gigachat">üü£ GigaChat ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è</option><option value="yandexgpt-lite">üü¢ YandexGPT‚ÄëLite ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è</option></select><button id="cc0" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button></div></div><div class="chat-wrapper"><div id="c0" class="chat"></div><div class="status-bar"><div><span class="status-dot"></span><span id="st1">–ì–æ—Ç–æ–≤ –∫ –¥–∏–∞–ª–æ–≥—É</span></div><a href="https://github.com/USERNAME/REPO" target="_blank" class="small-link">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ GitHub</a></div><div class="input-area"><textarea id="i0" class="input" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea><button id="s1" class="btn">‚û§</button></div></div></div></div></div><script>(function(){function q(a){try{return btoa(unescape(encodeURIComponent(a)))}catch(b){return""}}function r(a){try{return decodeURIComponent(escape(atob(a)))}catch(b){return""}}var A="https://litellm.tokengate.ru/v1/chat/completions",B="sk-q9e9WNdWoZra6XgZfMKiOw",C={alice:{id:"yandex/aliceai-llm/latest",label:"üîµ Alice"},gigachat:{id:"cloudru/GigaChat/GigaChat-2-Max",label:"üü£ GigaChat"},"yandexgpt-lite":{id:"yandex/yandexgpt-lite/rc",label:"üü¢ YandexGPT-Lite"}},D="filsik_ai_multi_chats_v2_obf",E=document.getElementById("c0"),F=document.getElementById("i0"),G=document.getElementById("s1"),H=document.getElementById("m0"),I=document.getElementById("cc0"),J=document.getElementById("st1"),K=document.getElementById("ct0"),L=document.getElementById("cs0"),M=document.getElementById("cl0"),N=document.getElementById("sc0"),O=document.getElementById("st0"),P=document.getElementById("s0"),Q=document.getElementById("sb0"),R=document.getElementById("n0");var f={},g=null;function S(){return"chat_"+Date.now()+"_"+Math.random().toString(16).slice(2)}function T(){return new Date().toISOString()}function U(a){a=new Date(a);var b=String(a.getHours()).padStart(2,"0");a=String(a.getMinutes()).padStart(2,"0");return b+":"+a}function V(a){a=new Date(a);return a.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function W(a){a=a.find(function(b){return"user"===b.role});if(!a||!a.content)return"–ù–æ–≤—ã–π —á–∞—Ç";a=a.content.trim().replace(/\s+/g," ");return a?a.length>40?a.slice(0,37)+"...":a:"–ù–æ–≤—ã–π —á–∞—Ç"}function X(){var a=S(),b=H.value in C?H.value:"alice";f[a]={id:a,title:"–ù–æ–≤—ã–π —á–∞—Ç",modelKey:b,createdAt:T(),updatedAt:T(),messages:[]};g=a;Y();Z();aa()}function ba(){g&&f[g]||(g&&(delete f[g],g=null),a:if(g)break a;var a=Object.keys(f);0<a.length?g=a[0]:X())}function Y(){try{var a={};Object.keys(f).forEach(function(b){var c=f[b];a[b]={id:c.id,title:c.title,modelKey:c.modelKey,createdAt:c.createdAt,updatedAt:c.updatedAt,messages:c.messages.map(function(d){return{role:d.role,content:q(d.content),time:d.time}})}});localStorage.setItem(D,JSON.stringify(a))}catch(b){console.error("save err",b)}}function ca(){try{var a=localStorage.getItem(D);if(!a){f={};g=null;X();return}a=JSON.parse(a);if(!a||"object"!==typeof a){f={};g=null;X();return}f={};Object.keys(a).forEach(function(b){var c=a[b];f[b]={id:c.id,title:c.title,modelKey:c.modelKey,createdAt:c.createdAt,updatedAt:c.updatedAt,messages:(c.messages||[]).map(function(d){return{role:d.role,content:r(d.content),time:d.time}})}});var e=Object.keys(f);0===e.length?(f={},g=null,X()):g=e[0]}catch(b){console.error("load err",b),f={},g=null,X()}}function da(){var a=Object.keys(f).sort(function(c,d){c=f[c].updatedAt||f[c].createdAt||"";d=f[d].updatedAt||f[d].createdAt||"";return d.localeCompare(c)});N.textContent=1===a.length?"1 —á–∞—Ç":a.length+" —á–∞—Ç–æ–≤";M.innerHTML="";a.forEach(function(c){var d=f[c],e=document.createElement("div");e.className="chat-list-item"+(c===g?" active":"");e.dataset.chatId=c;var h=document.createElement("div");h.className="chat-list-main";var k=document.createElement("div");k.className="chat-list-title";k.textContent=d.title||"–ù–æ–≤—ã–π —á–∞—Ç";var l=document.createElement("div");l.className="chat-list-sub";var m=(d.messages[d.messages.length-1]||{}).content||"";m=m.trim().replace(/\s+/g," ");l.textContent=m?40<m.length?m.slice(0,37)+"...":m:"–ë–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π";var n=document.createElement("div");n.className="chat-list-meta";n.textContent=V(d.updatedAt||d.createdAt);h.appendChild(k);h.appendChild(l);h.appendChild(n);var p=document.createElement("div");p.className="chat-list-delete";p.textContent="‚úï";p.addEventListener("click",function(t){t.stopPropagation();ea(c)});e.addEventListener("click",function(){g!==c&&(g=c,Y(),da(),Z(),fa())});e.appendChild(h);e.appendChild(p);M.appendChild(e)})}function ea(a){var b=Object.keys(f);if(1===b.length)f={},g=null,X();else{delete f[a];f[g]||(b=Object.keys(f),g=b[0])}Y();da();Z()}function Z(){ba();var a=f[g];if(!a)return;H.value=a.modelKey in C?a.modelKey:"alice";K.textContent=a.title||"–ù–æ–≤—ã–π —á–∞—Ç";var b=C[a.modelKey]&&C[a.modelKey].label||"–ú–æ–¥–µ–ª—å",c=a.messages.length;0===c?L.textContent=b+" ‚Ä¢ –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π":L.textContent=b+" ‚Ä¢ —Å–æ–æ–±—â–µ–Ω–∏–π: "+c;E.innerHTML="";a.messages.forEach(function(d){var e=document.createElement("div");e.className="message-row "+d.role;var h=document.createElement("div");h.className="message "+d.role;h.textContent=d.content;"system"===d.role&&(e.style.justifyContent="center");e.appendChild(h);"system"!==d.role&&d.time&&(h=document.createElement("div"),h.className="timestamp",h.textContent=U(d.time),e.appendChild(h));E.appendChild(e)});E.scrollTop=E.scrollHeight}function ga(a,b){ba();var c=f[g],d={role:a,content:b,time:T()};c.messages.push(d);50<c.messages.length&&(c.messages=c.messages.slice(-50));c.updatedAt=d.time;"user"===a&&(c.title=W(c.messages));Y();da();Z()}async function ha(){var a=F.value.trim();if(!a)return;ba();var b=f[g],c=H.value in C?H.value:"alice";b.modelKey=c;ga("user",a);F.value="";ia();J.textContent="–î—É–º–∞—é...";var d=b.messages.filter(function(h){return"user"===h.role||"assistant"===h.role}).map(function(h){return{role:h.role,content:h.content}}).slice(-10),e={model:C[c].id,messages:d};try{var h=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+B},body:JSON.stringify(e)});if(!h.ok)throw Error("HTTP "+h.status);h=await h.json();h=(h.choices&&h.choices[0]&&h.choices[0].message&&h.choices[0].message.content)||"(–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç)";ga("assistant",h);J.textContent="–ì–æ—Ç–æ–≤ –∫ –¥–∏–∞–ª–æ–≥—É"}catch(k){console.error(k),ga("assistant","‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ –º–æ–¥–µ–ª–∏: "+k.message),J.textContent="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ"}}function ia(){F.style.height="auto";F.style.height=Math.min(F.scrollHeight,120)+"px"}function fa(){setTimeout(function(){F.focus()},50)}function ja(){P.classList.add("open");Q.classList.add("visible")}function ka(){P.classList.remove("open");Q.classList.remove("visible")}H.addEventListener("change",function(){ba();var a=f[g];a.modelKey=H.value in C?H.value:"alice";a.updatedAt=T();Y();da();Z()});I.addEventListener("click",function(){if(confirm("–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞?")){ba();var a=f[g];a.messages=[];a.title="–ù–æ–≤—ã–π —á–∞—Ç";a.updatedAt=T();Y();da();Z()}});G.addEventListener("click",function(){ha()});F.addEventListener("keydown",function(a){"Enter"===a.key&&!a.shiftKey&&(a.preventDefault(),ha())});F.addEventListener("input",ia);O.addEventListener("click",function(){ja()});Q.addEventListener("click",function(){ka()});R.addEventListener("click",function(){X();ka()});ca();da();Z();ia()})();</script><script>(function(){function b(t){return t.split("").map(function(c){return String.fromCharCode(c.charCodeAt(0)-1)}).join("")}document.addEventListener("contextmenu",function(e){e.preventDefault()});document.addEventListener("keydown",function(e){if(e.keyCode===123){e.preventDefault();e.stopPropagation();return false}if(e.ctrlKey&&e.shiftKey&&(e.key==="I"||e.key==="J"||e.key==="C")){e.preventDefault();e.stopPropagation();return false}if(e.ctrlKey&&(e.key==="U"||e.key==="u")){e.preventDefault();e.stopPropagation();return false}},true);function c(){try{var t=160,w=window.outerWidth-window.innerWidth,h=window.outerHeight-window.innerHeight;if(w>t||h>t)return true}catch(e){}return false}function d(){alert("DevTools –æ—Ç–∫–ª—é—á–µ–Ω—ã –Ω–∞ —ç—Ç–æ–º —Å–∞–π—Ç–µ.")}setInterval(function(){if(c())d()},1000);(function e(){try{var x=b("efcgtfst");/* –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –ø—Ä–æ—Å—Ç–æ —à—É–º */}catch(_){ }setTimeout(e,2000)})()})();</script></body></html>
